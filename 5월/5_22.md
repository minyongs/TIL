<aside>
ğŸ’¡ index

</aside>

## Session

### HttpSession ì´ìš©

```java
import jakarta.servlet.http.HttpSession;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;

@Controller
public class SessionController {
 Â  Â // HttpSession ì§ì ‘ ì´ìš©
 Â  Â @GetMapping("/visit2")
 Â  Â public String trackVisit(HttpSession session) {
 Â  Â  Â  Â // ì„¸ì…˜ìœ¼ë¡œë¶€í„° ë°©ë¬¸ íšŸìˆ˜ ì–»ê¸°
 Â  Â  Â  Â Integer visitCount = (Integer) session.getAttribute("visitCount");

 Â  Â  Â  Â if(visitCount == null) { Â  Â // í•œë²ˆë„ ë°©ë¬¸í•˜ì§€ ì•Šì€ ê²½ìš°
 Â  Â  Â  Â  Â  Â visitCount = 0; // ì´ˆê¸°ê°’ ì„¤ì •
 Â  Â  Â   }
 Â  Â  Â  Â visitCount++;
 Â  Â  Â  Â session.setAttribute("visitCount", visitCount);

 Â  Â  Â  Â return "visit2";
 Â   }

 Â  Â // íŠ¹ì • ì„¸ì…˜ ì‚­ì œ
 Â  Â @GetMapping("resetVisit")
 Â  Â public String resetVisit(HttpSession session) {
 Â  Â  Â  Â // session ê°ì²´ì—ì„œ í•´ë‹¹ ì†ì„±ë§Œ ì´ˆê¸°í™”
 Â  Â  Â  Â session.removeAttribute("visitCount2");
 Â  Â  Â  Â session.setAttribute("visitCount", 0);
 Â  Â  Â  Â session.invalidate(); // ì„¸ì…˜ ì „ì²´ ì •ë¦¬
 Â  Â  Â  Â return "redirect:/visit2";
 Â   }
}
```

### `@SessionAttribute` ì–´ë…¸í…Œì´ì…˜ ì´ìš©

Session ì†ì„±ì„ Springì´ ìë™ìœ¼ë¡œ ê´€ë¦¬í•˜ë¯€ë¡œ SessionStatus ì´ìš©í•˜ì—¬ Session ì†ì„± ì œê±°

Controller ë©”ì†Œë“œê°€ í˜¸ì¶œë  ë•Œë§ˆë‹¤ Sessionì—ì„œ ì†ì„±ì„ Modelë¡œ ë³µì›í•˜ê¸° ë•Œë¬¸

```java
import jakarta.servlet.http.HttpSession;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.SessionAttributes;
import org.springframework.web.bind.support.SessionStatus;

@Controller
@SessionAttributes("visitCount2") Â  // annotation ì´ìš©
public class SessionController {
 Â  Â // ë°©ë¬¸ íšŸìˆ˜ ì´ˆê¸°í™”
 Â  Â @ModelAttribute("visitCount2")
 Â  Â public Integer initVisitCount() {
 Â  Â  Â  Â return 0;
 Â   }

 Â  Â // ì–´ë…¸í…Œì´ì…˜ ì´ìš©
 Â  Â @GetMapping("/visit2")
 Â  Â public String trackVisit(@ModelAttribute("visitCount2") Integer visitCount2, Model model) {
 Â  Â  Â  Â visitCount2++;
 Â  Â  Â  Â model.addAttribute("visitCount2", visitCount2);
 Â  Â  Â  Â return "visit2";
 Â   }

 Â  Â // ì„¸ì…˜ ì‚­ì œ
 Â  Â @GetMapping("resetVisit")
 Â  Â public String resetVisit(SessionStatus status) {
 Â  Â  Â  Â status.setComplete(); Â  // ì‚¬ìš©ì ì„¸ì…˜ ëª¨ë‘ ì´ˆê¸°í™”
 Â  Â  Â  Â return "redirect:/visit2";
 Â   }
}
```

- ë³¼ë§Œí•œ ìë£Œ
    
    https://stackoverflow.com/questions/27191798/spring-sessionattributes-vs-httpsession
    
    https://velog.io/@woply/spring-%EC%84%9C%EB%B8%94%EB%A6%BF%EC%9D%B4-%EC%A0%9C%EA%B3%B5%ED%95%98%EB%8A%94-HttpSession-%EC%8A%A4%ED%94%84%EB%A7%81%EC%9D%B4-%EC%A0%9C%EA%B3%B5%ED%95%98%EB%8A%94-SessionAttribute
    

## ìš”ì²­ ì²˜ë¦¬

`@Requestmapping`: ìš”ì²­ URLì„ Controllerì˜ íŠ¹ì • ë©”ì†Œë“œì— ë§¤í•‘í•˜ëŠ” ë° ì‚¬ìš© / HTTP ìš”ì²­ì„ íŠ¹ì • ë©”ì†Œë“œì— ì—°ê²°í•˜ì—¬ í•´ë‹¹ ë©”ì†Œë“œê°€ ìš”ì²­ ì²˜ë¦¬

### ìš”ì²­ ë°ì´í„° ì²˜ë¦¬

`@RequestParam`: URL ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë‚˜ form ë°ì´í„°ë¥¼ ë©”ì†Œë“œ íŒŒë¼ë¯¸í„°ë¡œ ë§¤í•‘

`@PathVariable`: URIì˜ ì¼ë¶€ë¥¼ ë³€ìˆ˜ë¡œ ìº¡ì²˜

`@RequestBody`: ìš”ì²­ ë³¸ë¬¸ì„ ê°ì²´ë¡œ ë§¤í•‘ / ì£¼ë¡œ JSON ë˜ëŠ” XML ë°ì´í„° ì²˜ë¦¬ì— ì‚¬ìš©

```java
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.*;

@Controller
public class RequestMappingController {
 Â  Â // RequestMappingì˜ methodëŠ” GetMapping í˜•íƒœë¡œ ì“¸ ìˆ˜ ìˆìŒ
 Â  Â @RequestMapping(value = "/ex", method = RequestMethod.GET)
 Â  Â @ResponseBody
 Â  Â public String getExample() {
 Â  Â  Â  Â return "Get Test";
 Â   }

 Â  Â // url: localhost:8080/search?query={query} í˜•íƒœ
 Â  Â @GetMapping("/search")
 Â  Â @ResponseBody
 Â  Â public ResponseEntity<String> Search(@RequestParam String query) {
 Â  Â  Â  Â ResponseEntity<String> response = new ResponseEntity<>(query, HttpStatus.OK);
 Â  Â  Â  Â return response;
 Â   }

 Â  Â @GetMapping("/guest/{name}")
 Â  Â public String guest(@PathVariable String name) {
 Â  Â  Â  Â System.out.println(name);
 Â  Â  Â  Â return "redirect:/result";
 Â   }
}
```

## View Resolver

ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë°˜í™˜ëœ view ì´ë¦„ì„ ê¸°ë°˜ìœ¼ë¡œ ì‹¤ì œ viewë¥¼ ì°¾ì•„ë‚´ê³  ë Œë”ë§ì„ ìœ„í•œ view ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” ì—­í• 

- Custom View
    
    ```java
    import jakarta.servlet.http.HttpServletRequest;
    import jakarta.servlet.http.HttpServletResponse;
    import org.springframework.web.servlet.View;
    
    import java.io.PrintWriter;
    import java.util.Map;
    
    public class MyCustomView implements View { // View
     Â  Â @Override
     Â  Â public String getContentType() {
     Â  Â  Â  Â return "text/html";
     Â   }
    
     Â  Â @Override
     Â  Â public void render(Map<String, ?> model, HttpServletRequest request, HttpServletResponse response) throws Exception {
     Â  Â  Â  Â response.setContentType(getContentType());
     Â  Â  Â  Â PrintWriter writer = response.getWriter();
     Â  Â  Â  Â writer.print("<html><body>");
     Â  Â  Â  Â writer.print("<h2>Custom Page</h2>");
     Â  Â  Â  Â writer.print("<p>This is my custom view.</p>");
     Â  Â  Â  Â writer.print("</body></html>");
    
     Â  Â  Â  Â writer.close();
     Â   }
    }
    ```
    
- Custom View Resolver
    
    ```java
    import com.example.springmvc.view.MyCustomView;
    import lombok.Setter;
    import org.springframework.core.Ordered;
    import org.springframework.web.servlet.View;
    import org.springframework.web.servlet.ViewResolver;
    
    import java.util.Locale;
    
    @Setter
    public class MyCustomViewResolver implements ViewResolver, Ordered {
     Â  Â private int order;
    
     Â  Â @Override
     Â  Â public int getOrder() {
     Â  Â  Â  Â return this.order;
     Â   }
    
     Â  Â @Override
     Â  Â public View resolveViewName(String viewName, Locale locale) throws Exception {
     Â  Â  Â  Â if(viewName.startsWith("my-prefix")) {
     Â  Â  Â  Â  Â  Â return new MyCustomView();
     Â  Â  Â   }
     Â  Â  Â  Â return null; Â  Â // ë‹¤ìŒ view resolverê°€ ì²˜ë¦¬
     Â   }
    }
    ```
    
- Config
    
    ```java
    import org.springframework.context.annotation.Bean;
    import org.springframework.context.annotation.Configuration;
    import org.springframework.web.servlet.config.annotation.EnableWebMvc;
    
    @Configuration
    @EnableWebMvc
    public class WebConfig {
     Â  Â @Bean
     Â  Â public MyCustomViewResolver myCustomViewResolver() {
     Â  Â  Â  Â MyCustomViewResolver resolver = new MyCustomViewResolver();
     Â  Â  Â  Â resolver.setOrder(0); Â  // ìš°ì„ ìˆœìœ„ ì„¤ì • (ê°€ì¥ ë†’ì€ ìˆœìœ„ ë¶€ì—¬)
     Â  Â  Â  Â return resolver;
     Â   }
    }
    ```
    
- Controller
    
    ```java
    package com.example.springmvc.controller;
    
    import org.springframework.stereotype.Controller;
    import org.springframework.web.bind.annotation.GetMapping;
    
    @Controller
    public class MyViewController {
     Â  Â @GetMapping("/custom")
     Â  Â public String customView() {
     Â  Â  Â  Â return "my-prefix-custom";
     Â   }
    }
    ```
    

## ì—ëŸ¬ í˜ì´ì§€ ì²˜ë¦¬

ê¸°ì¡´ WhiteLabel Error Pageê°€ ì•„ë‹Œ ì˜¤ë¥˜ í˜ì´ì§€ ì„¤ì •

`@ControllerAdvice` ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ ì „ì—­ ì˜ˆì™¸ ì²˜ë¦¬ê¸° ì„¤ì • / ëª¨ë“  Controllerì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ê³  ì ì ˆí•œ ì‘ë‹µ ìƒì„±

```java
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.ControllerAdvice;
import org.springframework.web.bind.annotation.ExceptionHandler;

@ControllerAdvice
public class GlobalExceptionHandler {
 Â  Â // ë¡œê±° ì„¤ì •
 Â  Â private static final Logger logger = LoggerFactory.getLogger(GlobalExceptionHandler.class);

 Â  Â @ExceptionHandler(Exception.class)
 Â  Â public String handler(Exception e, Model model) {
 Â  Â  Â  Â logger.error("error: ", e);
 Â  Â  Â  Â model.addAttribute("errorMessage", e.getMessage());
 Â  Â  Â  Â return "error";
 Â   }
}
```

## HTTP í”„ë¡œí† ì½œ (HyperText Tranfer Protocol)

ì›¹ì—ì„œ ë°ì´í„°ë¥¼ êµí™˜í•˜ëŠ” ê¸°ë³¸ í”„ë¡œí† ì½œ

í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ê°„ì˜ í†µì‹ ì„ ê°€ëŠ¥í•˜ê²Œ í•˜ë©° ìš”ì²­ê³¼ ì‘ë‹µì˜ í˜•íƒœë¡œ ì •ë³´ê°€ êµí™˜ë¨

ìƒíƒœë¥¼ ìœ ì§€í•˜ì§€ ì•ŠëŠ” stateless í”„ë¡œí† ì½œ

- ë©”ì†Œë“œ
    
    GET, POST, PUT, PATCH, DELETE
    
- HTTP ì‘ë‹µ ìƒíƒœ ì½”ë“œ
    - ì •ë³´ ì‘ë‹µ
        
        100 Continue: í´ë¼ì´ì–¸íŠ¸ê°€ ë‚˜ë¨¸ì§€ ìš”ì²­ì„ ê³„ì†í•´ì„œ ë³´ë‚´ë„ ëœë‹¤ëŠ” ì½”ë“œ
        
        101 Switching Protocols: ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ì˜ í”„ë¡œí† ì½œ ì „í™˜ ìš”ì²­ì„ ìˆ˜ë½
        
    - ì„±ê³µ ì‘ë‹µ
        
        200 OK: ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ì²˜ë¦¬ë¨ / ì‘ë‹µ ë³¸ë¬¸ì— ìš”ì²­ëœ ë°ì´í„° í¬í•¨
        
        201 Created: ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ì²˜ë¦¬ë¨ / ê²°ê³¼ë¡œ ìƒˆë¡œìš´ ë¦¬ì†ŒìŠ¤ ìƒì„±
        
        204 No Content: ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ì²˜ë¦¬ë¨ / ì»¨í…ì¸  ì œê³µ X
        
    - ë¦¬ë‹¤ì´ë ‰ì…˜ ë©”ì‹œì§€
        
        301 Moved Permanently: ìš”ì²­í•œ ë¦¬ì†ŒìŠ¤ê°€ ì˜êµ¬ì ìœ¼ë¡œ ìƒˆ ìœ„ì¹˜ë¡œ ì´ë™
        
        302 Found: ìš”ì²­í•œ ë¦¬ì†ŒìŠ¤ê°€ ì¼ì‹œì ìœ¼ë¡œ ë‹¤ë¥¸ URIë¡œ ì´ë™
        
        304 Not Modified: ìºì‹œëœ ë²„ì „ì´ ì—¬ì „íˆ ìœ íš¨í•˜ë¯€ë¡œ ì„œë²„ì—ì„œ ìˆ˜ì •ëœ ì»¨í…ì¸  ì—†ì´ ì‚¬ìš© ê°€ëŠ¥
        
    - í´ë¼ì´ì–¸íŠ¸ ì˜¤ë¥˜
        
        400 Bad Request: ë¬¸ë²• ì˜¤ë¥˜ë¡œ ì¸í•´ ì²˜ë¦¬ X
        
        401 Unauthorized: ì¸ì¦ í•„ìš”
        
        403 Forbidden: í´ë¼ì´ì–¸íŠ¸ì˜ ê¶Œí•œì´ ì—†ìŒ
        
        404 Not Found: ìš”ì²­í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ
        
    - ì„œë²„ ì˜¤ë¥˜
        
        500 Internal Server Error: ì„œë²„ì— ë¬¸ì œê°€ ìˆìŒ
        
        501 Not Implemented: ì„œë²„ê°€ ìš”ì²­ ë©”ì†Œë“œë¥¼ ì§€ì›í•˜ì§€ ì•Šì•„ ìˆ˜í–‰ ë¶ˆê°€
        
        503 Service Unavailable: ì„œë²„ê°€ ì˜¤ë²„ë¡œë“œë˜ì—ˆê±°ë‚˜ ìœ ì§€ë³´ìˆ˜ ì¤‘
